<!DOCTYPE html><html lang="ko"><head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Board Parts ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&amp;display=swap" rel="stylesheet"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
    <link href="https://ai-public.creatie.ai/gen_page/tailwind-custom.css" rel="stylesheet"/>
    <script src="https://cdn.tailwindcss.com/3.4.5?plugins=forms@0.5.7,typography@0.5.13,aspect-ratio@0.4.2,container-queries@0.1.1"></script><script>if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {document.documentElement.classList.add('dark')} else {document.documentElement.classList.remove('dark')}</script>
    <script src="https://ai-public.creatie.ai/gen_page/tailwind-config.min.js" data-color="#FFA500" data-border-radius="small"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.5.0/echarts.min.js"></script>
    <style>
        :root {
            --custom-color: #e65802; /* ë°ì€ ì˜¤ë Œì§€ìƒ‰ */
        }
        .bg-custom {
            background-color: var(--custom-color);
        }
        .text-custom {
            color: var(--custom-color);
        }
        .border-custom {
            border-color: var(--custom-color);
        }
        .focus\:border-custom:focus {
            border-color: var(--custom-color);
        }
        .focus\:ring-custom:focus {
            box-shadow: 0 0 0 3px rgba(255, 165, 0, 0.5);
        }
        .button {
            display: inline-block;
            padding: 10px 20px;
            background-color: #e65802;
            color: black;
            text-decoration: none;
            border-radius: 5px;
            text-align: center;
        }
        .button:hover {
            background-color: #FFA500;
        }
        /* ì •ë ¬ ì•„ì´ì½˜ ìŠ¤íƒ€ì¼ */
        .sort-icon::after {
            content: '\2195'; /* ì–‘ë°©í–¥ í™”ì‚´í‘œ */
            margin-left: 4px;
            opacity: 0.3;
        }
        
        th[data-sort="asc"] .sort-icon::after {
            content: '\2191'; /* ìœ„ í™”ì‚´í‘œ */
            opacity: 1;
        }
        
        th[data-sort="desc"] .sort-icon::after {
            content: '\2193'; /* ì•„ë˜ í™”ì‚´í‘œ */
            opacity: 1;
        }

        /* ë‹¤í¬ëª¨ë“œ ê´€ë ¨ ìŠ¤íƒ€ì¼ */
        #darkModeToggle {
            transition: all 0.3s ease;
        }
        #darkModeToggle:hover {
            transform: rotate(15deg);
        }
        .dark #darkModeToggle:hover {
            transform: rotate(-15deg);
        }

        /* ë‹¤í¬ëª¨ë“œ í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
        .dark th {
            background-color: #2d2d2d !important;
            color: #f0f0f0 !important;
        }

        .dark table td {
            color: #f0f0f0 !important;
        }

        .dark .bg-green-50, 
        .dark .bg-green-200 {
            background-color: rgba(22, 101, 52, 0.3) !important;
        }

        .dark .bg-red-50,
        .dark .bg-red-200 {
            background-color: rgba(153, 27, 27, 0.3) !important;
        }

        .dark .bg-gray-200 {
            background-color: rgba(107, 114, 128, 0.3) !important;
        }        /* ëª¨ë‹¬ ë‹¤í¬ëª¨ë“œ ìŠ¤íƒ€ì¼ */
        .dark .bg-white {
            background-color: #1e1e1e !important;
            color: #f0f0f0 !important;
        }

        .dark input, .dark select, .dark textarea {
            background-color: #2d2d2d !important;
            color: #ffffff !important;
            border-color: #444444 !important;
        }

        .dark label, .dark h2, .dark h3, .dark p {
            color: #f0f0f0 !important;
        }
        
        /* ë‹¤í¬ëª¨ë“œ ëª¨ë‹¬ ê°œì„  */
        .dark .rounded-lg.shadow-lg {
            background-color: #1f2937 !important; /* bg-gray-800 */
            border: 1px solid #374151 !important; /* border-gray-700 */
        }
        /* ë‹¤í¬ëª¨ë“œ ë°°ê²½ìƒ‰ ìŠ¤íƒ€ì¼ */
        .dark body {
            background-color: #111827 !important; /* bg-gray-900ê³¼ ë™ì¼í•œ ìƒ‰ìƒ */
            color: #f3f4f6 !important;
        }

        .dark aside.w-64 {
            background-color: #374151 !important; /* bg-gray-700ê³¼ ë™ì¼í•œ ìƒ‰ìƒ */
        }

        .dark header {
            background-color: #1f2937 !important; /* bg-gray-800ê³¼ ë™ì¼í•œ ìƒ‰ìƒ */
        }

        .dark main .bg-orange-50,
        .dark main .bg-orange-100, 
        .dark .bg-orange-50, 
        .dark .bg-orange-100 {
            background-color: #1f2937 !important; /* bg-gray-800ê³¼ ë™ì¼í•œ ìƒ‰ìƒ */
        }

        .dark h1.text-orange-900,
        .dark h3.text-orange-900,
        .dark .text-orange-900,
        .dark .text-orange-800 {
            color: #f3f4f6 !important;
        }

        .dark .border-orange-200,
        .dark .border-orange-300 {
            border-color: #374151 !important; /* bg-gray-700ê³¼ ë™ì¼í•œ ìƒ‰ìƒ */
        }

        /* ì‚¬ì´ë“œë°” ë‹¤í¬ëª¨ë“œ ìŠ¤íƒ€ì¼ */
        .dark aside.w-64 {
            background-color: #1f2937 !important; /* bg-gray-800ê³¼ ë™ì¼ */
        }

        .dark .button {
            background-color: #374151 !important; /* bg-gray-700ê³¼ ë™ì¼ */
            color: #f3f4f6 !important; /* í…ìŠ¤íŠ¸ ìƒ‰ìƒ */
        }

        .dark .button:hover {
            background-color: #4b5563 !important; /* bg-gray-600ê³¼ ë™ì¼ */
        }        .dark .button.bg-yellow-500 {
            background-color: #4338ca !important; /* ì„ íƒëœ ë²„íŠ¼ì€ ì¸ë””ê³ -700ìœ¼ë¡œ */
            color: #f3f4f6 !important;
        }

        /* ë‹¤í¬ëª¨ë“œ í…Œì´ë¸” í—¤ë” í˜¸ë²„ íš¨ê³¼ ê°œì„  */
        .dark th.hover\:bg-orange-100:hover {
            background-color: #374151 !important; /* bg-gray-700 */
        }
          /* ë‹¤í¬ëª¨ë“œì—ì„œ í…Œì´ë¸” í—¤ë” í…ìŠ¤íŠ¸ ì‹œì¸ì„± ê°œì„  */
        .dark th .sort-icon::after {
            color: #d1d5db !important; /* text-gray-300 */
        }
        
        /* ë‹¤í¬ëª¨ë“œ ìƒíƒœ ë°°ì§€ ê°œì„  ìŠ¤íƒ€ì¼ */
        .dark .bg-red-200.text-red-800 {
            background-color: #7f1d1d !important; /* red-900 */
            color: #fef2f2 !important; /* red-50 */
            border: 1px solid #b91c1c !important; /* red-600 border */
        }
        
        .dark .bg-green-200.text-green-800 {
            background-color: #14532d !important; /* green-900 */
            color: #f0fdf4 !important; /* green-50 */
            border: 1px solid #16a34a !important; /* green-600 border */
        }
        
        .dark .bg-gray-200.text-gray-800 {
            background-color: #1f2937 !important; /* gray-800 */
            color: #f9fafb !important; /* gray-50 */
            border: 1px solid #4b5563 !important; /* gray-600 border */
        }
    </style>
</head>
<body class="min-h-screen bg-orange-50 dark:bg-gray-900">
    <div class="flex h-screen overflow-hidden">
        <aside class="w-64 bg-orange-600 text-white dark:bg-orange-500">
            <a href="#" id="homeRefreshButton" class="block text-center p-2 hover:bg-orange-700 transition-all duration-300">
                <img src="nepesark_2-removebg-preview.png" alt="HOME" class="h-30 w-auto transition-transform duration-300 hover:scale-105" />
            </a>
            <a href="index.html" class="button w-full text-left bg-orange-500 text-black mb-1">ğŸ“™ Parts ì¬ê³ ê´€ë¦¬</a>
            <a href="Parts_ì…ì¶œê³ .html" class="button w-full text-left bg-orange-500 hover:bg-yellow-500 text-black mb-1">ğŸšš Parts ì…ì¶œê³  ì´ë ¥</a>
            <a href="ì¬ê³ ëª©ë¡.html" class="button w-full text-left bg-yellow-500 hover:bg-yellow-500 text-black mb-1">ğŸ“Š ì¬ê³ ëª©ë¡ ê´€ë¦¬</a>
            <div class="mt-6 px-4">
                <h3 class="text-sm font-semibold text-orange-200 uppercase tracking-wider">ë¹ ë¥¸ ì‘ì—…</h3>
                <div class="mt-3 space-y-1">
                    <button id="openModalButton" class="w-full text-left px-3 py-2 rounded-md text-sm font-medium bg-green-600 hover:bg-green-700 text-white transition-colors">
                        <i class="fas fa-plus mr-2"></i>ìƒˆ ë¶€í’ˆ ë“±ë¡
                    </button>
                    <button class="w-full text-left px-3 py-2 rounded-md text-sm font-medium text-orange-300 hover:bg-orange-700 hover:text-white">
                        <i class="fas fa-file-import mr-2"></i>ì…ê³  ì²˜ë¦¬
                    </button>
                    <button class="w-full text-left px-3 py-2 rounded-md text-sm font-medium text-orange-300 hover:bg-orange-700 hover:text-white">
                        <i class="fas fa-file-export mr-2"></i>ì¶œê³  ì²˜ë¦¬
                    </button>
                </div>
            </div>
        </aside>
        <main class="flex-1 overflow-y-auto">            <header class="bg-orange-100 shadow-sm dark:bg-orange-200">
                <div class="max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                    <div class="flex justify-between items-center">
                        <h1 class="text-2xl font-semibold text-orange-900 dark:text-orange-800">ì¥ë¹„ì†”ë£¨ì…˜ íŒŒíŠ¸ Board Parts ê´€ë¦¬ ì‹œìŠ¤í…œ</h1>
                        <div class="flex items-center space-x-4">
                            <!-- ì‚¬ìš©ì ì •ë³´ í‘œì‹œ -->
                            <div class="flex items-center space-x-2">
                                <span id="currentUser" class="text-sm text-orange-700 dark:text-orange-800">ë¡œë”© ì¤‘...</span>
                                <button onclick="logout()" class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm transition-colors">
                                    <i class="fas fa-sign-out-alt mr-1"></i>ë¡œê·¸ì•„ì›ƒ
                                </button>
                            </div>
                            
                            <!-- ë‹¤í¬ëª¨ë“œ í† ê¸€ ë²„íŠ¼ ì¶”ê°€ -->
                            <button id="darkModeToggle" class="rounded-full p-2 bg-orange-200 hover:bg-orange-300 dark:bg-orange-700 dark:hover:bg-orange-600 transition-colors mr-2">
                                <i id="moonIcon" class="fas fa-moon text-orange-800"></i>
                                <i id="sunIcon" class="fas fa-sun text-orange-800" style="display: none;"></i>
                            </button>

                            <div class="relative">
                                <button id="notificationButton" class="!rounded-button flex items-center text-orange-700 hover:text-orange-900 dark:text-orange-600 dark:hover:text-orange-800">
                                    <i class="fas fa-bell text-xl"></i>
                                </button>
                                <span id="notificationCounter" class="absolute -top-1 -right-1 bg-orange-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center">0</span>

                                <!-- ì•Œë¦¼ ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ì¶”ê°€ -->
                                <div id="notificationDropdown" class="absolute right-0 mt-2 w-80 bg-white rounded-md shadow-lg overflow-hidden z-20 hidden dark:bg-gray-800">
                                    <div class="py-2 px-3 bg-orange-100 dark:bg-gray-700">
                                        <div class="flex justify-between items-center">
                                            <h3 class="text-sm font-medium text-orange-900 dark:text-gray-200">ì‹¤ì‹œê°„ ì•Œë¦¼</h3>
                                            <span id="dropdownNotificationCounter" class="bg-orange-500 text-white text-xs rounded-full px-2 py-1">0</span>
                                        </div>
                                    </div>
                                    <div id="notificationList" class="max-h-80 overflow-y-auto">
                                        <!-- ì•Œë¦¼ ëª©ë¡ì€ JavaScriptë¡œ ë™ì  ìƒì„±ë¨ -->
                                        <div class="text-center text-gray-500 dark:text-gray-400 py-6">ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤</div>
                                    </div>
                                    <div class="py-2 px-3 bg-gray-100 text-right dark:bg-gray-900">
                                        <button id="clearAllNotifications" class="text-xs text-orange-600 hover:text-orange-800 dark:text-orange-400 dark:hover:text-orange-300">ëª¨ë‘ í™•ì¸</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </header><div class="max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <!-- ë©”ì¸ ì½˜í…ì¸  -->
                <div class="w-full">
                    <div class="bg-orange-50 rounded-lg shadow dark:bg-orange-100">
                        <div class="p-6">                                <div class="flex justify-between items-center mb-6">
                                    <h3 class="text-lg font-medium dark:text-orange-900"><b>ì¬ê³  ëª©ë¡</b></h3>
                                    <div class="flex space-x-4">
                                        <div class="relative">
                                            <input type="text" id="partSearchInput" placeholder="í’ˆëª…ìœ¼ë¡œ ê²€ìƒ‰" class="!rounded-button pl-10 pr-4 py-2 border border-orange-300 focus:border-custom focus:ring-1 focus:ring-custom dark:bg-orange-200 dark:border-orange-400 dark:text-orange-900"/>
                                            <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-orange-400"></i>
                                        </div>
                                        <button id="filterButton" class="!rounded-button bg-custom text-white px-4 py-2">
                                            <i class="fas fa-filter mr-2"></i>í•„í„°
                                        </button>
                                    </div>
                                </div>
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead>                                <tr>
                                    <th style="text-align: center;" class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-orange-100 dark:hover:bg-gray-700 transition-colors" data-column="location">
                                        ìœ„ì¹˜ <span class="sort-icon"></span>
                                    </th>
                                    <th style="text-align: center;" class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-orange-100 dark:hover:bg-gray-700 transition-colors" data-column="name">
                                        í’ˆëª… <span class="sort-icon"></span>
                                    </th>
                                    <th style="text-align: center;" class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-orange-100 dark:hover:bg-gray-700 transition-colors" data-column="company">
                                        êµ¬ë§¤ì²˜ <span class="sort-icon"></span>
                                    </th>
                                    <th style="text-align: center;" class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-orange-100 dark:hover:bg-gray-700 transition-colors" data-column="category">
                                        ì¹´í…Œê³ ë¦¬ <span class="sort-icon"></span>
                                    </th>
                                    <th style="text-align: center;" class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-orange-100 dark:hover:bg-gray-700 transition-colors" data-column="minStock">
                                        ìµœì†Œ ì¬ê³  <span class="sort-icon"></span>
                                    </th>                                    <th style="text-align: center;" class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-orange-100 dark:hover:bg-gray-700 transition-colors" data-column="inDate">
                                        ì…ê³ ì¼ <span class="sort-icon"></span>
                                    </th><th style="text-align: center;" class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-orange-100 dark:hover:bg-gray-700 transition-colors" data-column="currentStock">
                                        í˜„ì¬ ì¬ê³  <span class="sort-icon"></span>
                                    </th>
                                    <th style="text-align: center;" class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-orange-100 dark:hover:bg-gray-700 transition-colors" data-column="purchasePrice">
                                        êµ¬ë§¤ê¸ˆì•¡ <span class="sort-icon"></span>
                                    </th>
                                    <th style="text-align: center;" class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-orange-100 dark:hover:bg-gray-700 transition-colors" data-column="equipmentGroup">
                                        ì„¤ë¹„êµ° <span class="sort-icon"></span>
                                    </th>                                    <th style="text-align: center;" class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-orange-100 dark:hover:bg-gray-700 transition-colors" data-column="boardName">
                                        BOARDëª… <span class="sort-icon"></span>
                                    </th>
                                    <th style="text-align: center;" class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-orange-100 dark:hover:bg-gray-700 transition-colors" data-column="serialNumber">
                                        S/N <span class="sort-icon"></span>
                                    </th>
                                    <th style="text-align: center;" class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-orange-100 dark:hover:bg-gray-700 transition-colors" data-column="operator">
                                        ì‘ì—…ì <span class="sort-icon"></span>
                                    </th>
                                    <th style="text-align: center;" class="px-6 py-3 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-orange-100 dark:hover:bg-gray-700 transition-colors" data-column="status">
                                        ìƒíƒœ <span class="sort-icon"></span>
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="partsTableBody">
                                <!-- ë°ì´í„°ê°€ ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->                            </tbody>                                </table>
                            </div>
                        </div>                    </div>
                </div>
            </div>
        </main>    </div>
    
    <!-- ëª¨ë‹¬ ì°½ -->
    <div id="modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 w-96 max-w-2xl max-h-screen overflow-y-auto">
            <h2 class="text-lg font-semibold mb-4 dark:text-white">ìƒˆ ë¶€í’ˆ ë“±ë¡</h2>
            <form id="partForm">
                <div class="mb-4">
                    <label for="inDate" class="block text-sm font-medium text-gray-700 dark:text-gray-300">ì…ê³ ì¼</label>
                    <input type="date" id="inDate" class="mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500">
                </div>
                <div class="mb-4">
                    <label for="location" class="block text-sm font-medium text-gray-700 dark:text-gray-300">ìœ„ì¹˜</label>
                    <input type="text" id="location" list="locationList" autocomplete="off" 
                           class="mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500 editable-input"
                           style="cursor: text;" required>
                    <datalist id="locationList"></datalist>
                </div>
                
                <div class="mb-4">
                    <label for="name" class="block text-sm font-medium text-gray-700 dark:text-gray-300">í’ˆëª…</label>
                    <input type="text" id="name" list="nameList" autocomplete="off" 
                           class="mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500 editable-input"
                           style="cursor: text;" required>
                    <datalist id="nameList"></datalist>
                </div>
                
                <div class="mb-4">
                    <label for="company" class="block text-sm font-medium text-gray-700 dark:text-gray-300">êµ¬ë§¤ì²˜</label>
                    <input type="text" id="company" list="companyList" autocomplete="off" 
                           class="mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500 editable-input"
                           style="cursor: text;" required>
                    <datalist id="companyList"></datalist>
                </div>
                <div class="mb-4">
                    <label for="category" class="block text-sm font-medium text-gray-700 dark:text-gray-300">ì¹´í…Œê³ ë¦¬</label>
                    <input type="text" id="category" list="categoryList" autocomplete="off" 
                        class="mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500 editable-input"
                        style="cursor: text;" required>
                    <datalist id="categoryList"></datalist>
                </div>
                <div class="mb-4">
                    <label for="minStock" class="block text-sm font-medium text-gray-700 dark:text-gray-300">ìµœì†Œ ì¬ê³  ê°œìˆ˜</label>
                    <input type="number" id="minStock" class="mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500" min="1" step="1" required>
                </div>
                <div class="mb-4">
                    <label for="purchasePrice" class="block text-sm font-medium text-gray-700 dark:text-gray-300">êµ¬ë§¤ê¸ˆì•¡ (â‚©)</label>
                    <input type="number" id="purchasePrice" class="mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500" min="0" step="1" placeholder="ì˜ˆ: 5000">
                </div>
                <div class="mb-4">
                    <label for="operator" class="block text-sm font-medium text-gray-700 dark:text-gray-300">ì‘ì—…ì</label>
                    <input type="text" id="operator" list="operatorList" autocomplete="off"
                           class="mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500 editable-input"
                           style="cursor: text;" placeholder="ì˜ˆ: í™ê¸¸ë™">
                    <datalist id="operatorList"></datalist>
                </div>
                <div class="flex justify-end space-x-4">
                    <button type="button" id="cancelButton" class="px-4 py-2 bg-gray-300 dark:bg-gray-600 dark:text-white rounded-md hover:bg-gray-400 dark:hover:bg-gray-700">ì·¨ì†Œ</button>
                    <button type="submit" class="px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700">ë“±ë¡</button>
                </div>
            </form>
        </div>    </div>    <script>        // ëª¨ë‹¬ê³¼ í¼ ìš”ì†Œë“¤ ì •ì˜
        const modal = document.getElementById('modal');
        const partForm = document.getElementById('partForm');
        const openModalButton = document.getElementById('openModalButton');
        const cancelButton = document.getElementById('cancelButton');

        // ì˜¤ëŠ˜ ë‚ ì§œë¡œ ì…ê³ ì¼ ê¸°ë³¸ê°’ ì„¤ì •
        document.getElementById('inDate').valueAsDate = new Date();

        // ì·¨ì†Œ ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ ë‹«ê¸°
        cancelButton.addEventListener('click', () => {
            modal.classList.add('hidden');
        });
    
        openModalButton.addEventListener('click', async () => {
            // í¼ ì´ˆê¸°í™” - ì´ì „ ì…ë ¥ê°’ ì‚­ì œ
            partForm.reset();
            document.getElementById('inDate').valueAsDate = new Date();
            
            // ëª¨ë‹¬ ì—´ê¸° ì „ì— DB ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
            try {
                const result = await window.partsAPI.getDbData();
                
                if (result.success) {
                    // ë°ì´í„°ë¦¬ìŠ¤íŠ¸ ì´ˆê¸°í™” ì „ì— ì½˜ì†”ì— ì¶œë ¥í•˜ì—¬ í™•ì¸
                    console.log('ê°€ì ¸ì˜¨ ë°ì´í„°:', result.data);                    // ë°ì´í„°ë¦¬ìŠ¤íŠ¸ ì´ˆê¸°í™”
                    document.getElementById('locationList').innerHTML = '';
                    document.getElementById('nameList').innerHTML = '';
                    document.getElementById('companyList').innerHTML = '';
                    document.getElementById('categoryList').innerHTML = '';
                    document.getElementById('operatorList').innerHTML = '';
                    
                    // ìœ„ì¹˜ ë°ì´í„° ì¶”ê°€
                    if (result.data.locations && result.data.locations.length > 0) {
                        result.data.locations.forEach(location => {
                            if (location) { // nullì´ë‚˜ undefined ì²´í¬
                                const option = document.createElement('option');
                                option.value = location;
                                document.getElementById('locationList').appendChild(option);
                            }
                        });
                    }
                    
                    // í’ˆëª… ë°ì´í„° ì¶”ê°€
                    if (result.data.names && result.data.names.length > 0) {
                        result.data.names.forEach(name => {
                            if (name) { // nullì´ë‚˜ undefined ì²´í¬
                                const option = document.createElement('option');
                                option.value = name;
                                document.getElementById('nameList').appendChild(option);
                            }
                        });
                    }
                    
                    // êµ¬ë§¤ì²˜ ë°ì´í„° ì¶”ê°€
                    if (result.data.companies && result.data.companies.length > 0) {
                        result.data.companies.forEach(company => {
                            if (company) { // nullì´ë‚˜ undefined ì²´í¬
                                const option = document.createElement('option');
                                option.value = company;
                                document.getElementById('companyList').appendChild(option);
                            }
                        });
                    }                    // ì¹´í…Œê³ ë¦¬ê°€ ìˆìœ¼ë©´ ë°°ì—´ì— ì¶”ê°€
                    if (result.data.categories && result.data.categories.length > 0) {
                        result.data.categories.forEach(category => {
                            if (category) { // nullì´ë‚˜ undefined ì²´í¬
                                const option = document.createElement('option');
                                option.value = category;
                                document.getElementById('categoryList').appendChild(option);
                            }
                        });
                    }                    // ì‘ì—…ì datalist ì±„ìš°ê¸°
                    if (result.data.operators && result.data.operators.length > 0) {
                        result.data.operators.forEach(operator => {
                            if (operator) {
                                const option = document.createElement('option');
                                option.value = operator;
                                document.getElementById('operatorList').appendChild(option);
                            }
                        });
                    }

                    
                    console.log('ê¸°ì¡´ DB ë°ì´í„° ë¡œë“œ ì™„ë£Œ', {
                        'locationList ê¸¸ì´': document.getElementById('locationList').children.length,
                        'nameList ê¸¸ì´': document.getElementById('nameList').children.length,
                        'companyList ê¸¸ì´': document.getElementById('companyList').children.length,
                        'categoryList ê¸¸ì´': document.getElementById('categoryList').children.length
                    });
                } else {
                    console.error('ê¸°ì¡´ DB ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', result.error);
                }
            } catch (error) {
                console.error('API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
            }
            
            // ëª¨ë‹¬ í‘œì‹œ
            modal.classList.remove('hidden');
        });
    
        partForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            // í’ˆëª… ê°€ì ¸ì˜¤ê¸°
            const partName = document.getElementById('name').value;
            
            try {
                // í’ˆëª… ì¤‘ë³µ ì²´í¬
                const checkResult = await window.partsAPI.checkDuplicatePart(partName);
                
                // ì¤‘ë³µ í’ˆëª… ë°œê²¬ ì‹œ ì¸í„°ë½ ì²˜ë¦¬ ë¶€ë¶„ ìˆ˜ì •
                if (checkResult.success && checkResult.isDuplicate) {
                    // ëª¨ë‹¬ ë‹«ê¸°
                    modal.classList.add('hidden');
                    
                    // ì¤‘ë³µ ì•Œë¦¼ ì»¤ìŠ¤í…€ ëª¨ë‹¬ ìƒì„± ë° í‘œì‹œ
                    const alertModal = document.createElement('div');
                    alertModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                    alertModal.id = 'duplicateAlertModal';
                    
                    alertModal.innerHTML = `
                        <div class="bg-white rounded-lg shadow-lg p-6 max-w-md">
                            <h3 class="text-lg font-semibold mb-4">ì¤‘ë³µ ë¶€í’ˆ ì•Œë¦¼</h3>
                            <p class="mb-4">ì¤‘ë³µë˜ëŠ” ë¶€í’ˆì´ ì¡´ì¬í•©ë‹ˆë‹¤. ì•„ë˜ ì˜µì…˜ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”:</p>
                            <div class="mt-6 flex justify-end space-x-3">
                                <button id="closeAlertBtn" class="px-4 py-2 bg-gray-300 rounded-md hover:bg-gray-400">
                                    ë‹«ê¸°
                                </button>
                                <button id="importBtn" class="px-4 py-2 bg-custom text-white rounded-md hover:bg-orange-700">
                                    <i class="fas fa-file-import mr-2"></i>ì…ê³  ì²˜ë¦¬
                                </button>
                                <button id="exportBtn" class="px-4 py-2 bg-custom text-white rounded-md hover:bg-orange-700">
                                    <i class="fas fa-file-export mr-2"></i>ì¶œê³  ì²˜ë¦¬
                                </button>
                            </div>
                        </div>
                    `;
                    
                    document.body.appendChild(alertModal);
                    
                    // ë²„íŠ¼ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
                    document.getElementById('closeAlertBtn').addEventListener('click', () => {
                        document.getElementById('duplicateAlertModal').remove();
                    });
                    
                    document.getElementById('importBtn').addEventListener('click', () => {
                        document.getElementById('duplicateAlertModal').remove();
                        // ì—¬ê¸°ì— ì…ê³  ì²˜ë¦¬ ëª¨ë‹¬ì„ ì—´ê±°ë‚˜ ì…ê³  ì²˜ë¦¬ í˜ì´ì§€ë¡œ ì´ë™í•˜ëŠ” ì½”ë“œ ì¶”ê°€
                        const importBtn = document.querySelector('button i.fa-file-import').parentElement;
                        if (importBtn) importBtn.click();
                    });
                    
                    document.getElementById('exportBtn').addEventListener('click', () => {
                        document.getElementById('duplicateAlertModal').remove();
                        // ì—¬ê¸°ì— ì¶œê³  ì²˜ë¦¬ ëª¨ë‹¬ì„ ì—´ê±°ë‚˜ ì¶œê³  ì²˜ë¦¬ í˜ì´ì§€ë¡œ ì´ë™í•˜ëŠ” ì½”ë“œ ì¶”ê°€
                        const exportBtn = document.querySelector('button i.fa-file-export').parentElement;
                        if (exportBtn) exportBtn.click();
                    });
                    
                    return; // ë“±ë¡ ì¤‘ë‹¨
                }
                  // í¼ ë°ì´í„° ìˆ˜ì§‘
                const formData = {
                    location: document.getElementById('location').value,
                    name: document.getElementById('name').value,
                    company: document.getElementById('company').value,
                    category: document.getElementById('category').value,
                    minStock: document.getElementById('minStock').value,
                    inDate: document.getElementById('inDate').value,
                    purchasePrice: document.getElementById('purchasePrice').value,
                    operator: document.getElementById('operator').value
                };
                
                console.log('ë“±ë¡í•  ë°ì´í„°:', formData);
                
                // partsAPIë¥¼ í†µí•´ ë©”ì¸ í”„ë¡œì„¸ìŠ¤ë¡œ ë°ì´í„° ì „ì†¡
                const result = await window.partsAPI.registerPart(formData);
                
                if (result.success) {
                    alert(`ë¶€í’ˆì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.`);
                    
                    // í…Œì´ë¸”ì— ìƒˆ í–‰ ì¶”ê°€
                    const tbody = document.querySelector('table tbody');
                    const newRow = document.createElement('tr');
                    newRow.classList.add('border-b');
                    
                    // ìƒíƒœëŠ” í•­ìƒ í•„ìš”(í˜„ì¬ ì¬ê³  0ì´ë¯€ë¡œ)ë¡œ ì„¤ì •
                    const status = '<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-200 text-red-800">í•„ìš”</span>';

                    newRow.innerHTML = `
                        <td class="py-3 px-4">${formData.location}</td>
                        <td class="py-3 px-4">${formData.name}</td>
                        <td class="py-3 px-4">${formData.company}</td>
                        <td class="py-3 px-4">${formData.category}</td>
                        <td class="text-right py-3 px-4">${formData.minStock}</td>
                        <td class="py-3 px-4">${formData.inDate}</td>
                        <td class="text-right py-3 px-4">0</td>
                        <td class="py-3 px-4">${formData.purchasePrice || ''}</td>
                        <td class="py-3 px-4"></td>
                        <td class="py-3 px-4"></td>
                        <td class="py-3 px-4"></td>
                        <td class="py-3 px-4">${formData.operator || ''}</td>
                        <td class="py-3 px-4 text-center">${status}</td>
                    `;
                    
                    tbody.appendChild(newRow);
                    
                    // ëª¨ë‹¬ ë‹«ê³  í¼ ì´ˆê¸°í™”
                    modal.classList.add('hidden');
                    partForm.reset();
                    // ë‹¤ì‹œ ì˜¤ëŠ˜ ë‚ ì§œë¡œ ì…ê³ ì¼ ì„¤ì •
                    document.getElementById('inDate').valueAsDate = new Date();
                } else {
                    // ì˜¤ë¥˜ ë©”ì‹œì§€ í‘œì‹œ
                    alert(`ë¶€í’ˆ ë“±ë¡ ì‹¤íŒ¨: ${result.error}`);
                }
            } catch (error) {
                console.error('API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
                alert('ë¶€í’ˆ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        });
        // input í•„ë“œ í¬ì»¤ìŠ¤ ë° í´ë¦­ ì²˜ë¦¬ - ì´ ì½”ë“œë¥¼ ì¶”ê°€í•˜ì„¸ìš”
        const editableInputs = document.querySelectorAll('.editable-input');
        editableInputs.forEach(input => {
            // í´ë¦­ ì´ë²¤íŠ¸ - í•´ë‹¹ ìš”ì†Œì— í¬ì»¤ìŠ¤
            input.addEventListener('click', function(e) {
                this.focus();
                // ì„ íƒ ë™ì‘ ë°©ì§€
                e.preventDefault();
            });
            
            // ê°•ì œë¡œ í¸ì§‘ ëª¨ë“œ í™œì„±í™”
            input.addEventListener('focus', function() {
                // ì»¤ì„œë¥¼ í…ìŠ¤íŠ¸ ëìœ¼ë¡œ ì´ë™
                const val = this.value;
                this.value = '';
                this.value = val;
                
                // í•„ìš”í•œ ê²½ìš° ì„ íƒ ìƒíƒœ ì œê±°
                setTimeout(() => {
                    this.selectionStart = this.selectionEnd = this.value.length;
                }, 10);
            });
        });

    </script>
    <script>
        // "Parts ì¬ê³  ê´€ë¦¬" í´ë¦­ ì‹œ ì´ë™
        document.querySelector("span:contains('Parts ì¬ê³  ê´€ë¦¬')").parentElement.addEventListener('click', function() {
            window.location.href = 'stock_management.html'; // ì¬ê³  ê´€ë¦¬ í˜ì´ì§€ë¡œ ì´ë™
        });

        // "Parts ì…ì¶œê³  ê´€ë¦¬" í´ë¦­ ì‹œ ì´ë™
        document.querySelector("span:contains('Parts ì…ì¶œê³  ê´€ë¦¬')").parentElement.addEventListener('click', function() {
            window.location.href = 'Parts_ì…ì¶œê³ .html'; // ì…ì¶œê³  ê´€ë¦¬ í˜ì´ì§€ë¡œ ì´ë™
        });
    </script>    <script>
       document.addEventListener('DOMContentLoaded', async () => {
        try {
            // ì¸ì¦ ìƒíƒœ í™•ì¸ ë° ì‚¬ìš©ì ì •ë³´ ë¡œë”©
            await checkUserAuthentication();

            // ì‹¤ì‹œê°„ ì•Œë¦¼ ì—…ë°ì´íŠ¸
            await updateAlerts();

            // ì•Œë¦¼ ë²„íŠ¼ ë° ë“œë¡­ë‹¤ìš´ ì´ˆê¸°í™”
            setupNotifications();
            
            // ì›ë³¸ ë°ì´í„°ì™€ í˜„ì¬ ì •ë ¬ëœ ë°ì´í„° ì €ì¥ìš© ë³€ìˆ˜
            let originalData = [];
            let currentData = [];
            
            // í•„í„° ê¸°ëŠ¥ ì¶”ê°€
            const searchInput = document.getElementById('partSearchInput');
            const filterButton = document.getElementById('filterButton');

            // í•„í„° ë²„íŠ¼ í´ë¦­ ì‹œ í…Œì´ë¸” í•„í„°ë§
            filterButton.addEventListener('click', () => {
                const searchTerm = searchInput.value.trim().toLowerCase();
                
                if (searchTerm === '') {
                    // ê²€ìƒ‰ì–´ê°€ ì—†ìœ¼ë©´ ëª¨ë“  ë°ì´í„° í‘œì‹œ
                    renderTable(originalData);
                    return;
                }
                
                // í’ˆëª©ëª…(name)ìœ¼ë¡œ í•„í„°ë§í•˜ë˜ ë°ì´í„° ë¡œê¹… ì¶”ê°€
                console.log('í•„í„°ë§ ì „ ì›ë³¸ ë°ì´í„°:', originalData);
                
                const filteredData = originalData.filter(part => {
                    // í’ˆëª©ëª…ì´ ë¬¸ìì—´ë¡œ ë³€í™˜ í›„ ê²€ìƒ‰ì–´ë¥¼ í¬í•¨í•˜ëŠ”ì§€ í™•ì¸
                    const partName = String(part.name || '');
                    const result = partName.toLowerCase().includes(searchTerm);
                    console.log(`í’ˆëª©ëª… "${partName}"ì´ ê²€ìƒ‰ì–´ "${searchTerm}"ì„ í¬í•¨í•˜ëŠ”ì§€: ${result}`);
                    return result;
                });
                
                console.log('í•„í„°ë§ í›„ ë°ì´í„°:', filteredData);
                
                // í•„í„°ë§ëœ ê²°ê³¼ í‘œì‹œ
                renderTable(filteredData);
                
                // í•„í„°ë§ ê²°ê³¼ ì•ˆë‚´
                if (filteredData.length === 0) {
                    alert(`ê²€ìƒ‰ì–´ "${searchTerm}"ì— í•´ë‹¹í•˜ëŠ” í’ˆëª©ì´ ì—†ìŠµë‹ˆë‹¤.`);
                } else {
                    console.log(`${filteredData.length}ê°œì˜ í’ˆëª©ì´ ê²€ìƒ‰ë˜ì—ˆìŠµë‹ˆë‹¤.`);
                }
            });

            // ì—”í„° í‚¤ ì…ë ¥ìœ¼ë¡œë„ í•„í„°ë§ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    filterButton.click();
                }
            });

            // ì´ˆê¸°í™” ë²„íŠ¼ ì¶”ê°€
            const clearFilterButton = document.createElement('button');
            clearFilterButton.id = 'clearFilterButton';
            clearFilterButton.className = '!rounded-button bg-gray-300 text-black px-3 py-2 ml-2';
            clearFilterButton.innerHTML = '<i class="fas fa-times mr-1"></i>ì´ˆê¸°í™”';
            clearFilterButton.addEventListener('click', () => {
                searchInput.value = '';
                renderTable(originalData);
            });

            // í•„í„° ë²„íŠ¼ ë‹¤ìŒì— ì´ˆê¸°í™” ë²„íŠ¼ ì¶”ê°€
            filterButton.parentNode.appendChild(clearFilterButton);
            
            // í…Œì´ë¸” í—¤ë”ì— ì •ë ¬ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            const tableHeaders = document.querySelectorAll('th[data-column]');
            tableHeaders.forEach(header => {
                header.addEventListener('click', () => {
                    // í´ë¦­í•œ í—¤ë”ì˜ ë°ì´í„° ì»¬ëŸ¼ ì´ë¦„
                    const column = header.getAttribute('data-column');
                    
                    // í˜„ì¬ ì •ë ¬ ìƒíƒœ
                    const currentSort = header.getAttribute('data-sort') || 'none';
                    
                    // ëª¨ë“  í—¤ë”ì˜ ì •ë ¬ ìƒíƒœ ì´ˆê¸°í™”
                    tableHeaders.forEach(h => h.removeAttribute('data-sort'));
                    
                    let sortedData;
                    
                    // ì •ë ¬ ìƒíƒœ ë³€ê²½ ë° ë°ì´í„° ì •ë ¬
                    if (currentSort === 'none' || currentSort === 'desc') {                        // ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬
                        header.setAttribute('data-sort', 'asc');
                        sortedData = [...currentData].sort((a, b) => {
                            if (column === 'currentStock' || column === 'minStock' || column === 'purchasePrice') {
                                return parseInt(a[column] || 0) - parseInt(b[column] || 0);
                            }
                            return (a[column] || '').toString().localeCompare((b[column] || '').toString());
                        });
                    } else if (currentSort === 'asc') {
                        // ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬
                        header.setAttribute('data-sort', 'desc');
                        sortedData = [...currentData].sort((a, b) => {
                            if (column === 'currentStock' || column === 'minStock' || column === 'purchasePrice') {
                                return parseInt(b[column] || 0) - parseInt(a[column] || 0);
                            }
                            return (b[column] || '').toString().localeCompare((a[column] || '').toString());
                        });
                    }
                    
                    // ì •ë ¬ëœ ë°ì´í„°ë¡œ í…Œì´ë¸” ë‹¤ì‹œ ê·¸ë¦¬ê¸°
                    renderTable(sortedData);
                });
            });
            
            // í…Œì´ë¸” ë Œë”ë§ í•¨ìˆ˜
            function renderTable(data) {
                currentData = data;
                const tbody = document.getElementById('partsTableBody');
                tbody.innerHTML = ''; // ê¸°ì¡´ ë°ì´í„° ì´ˆê¸°í™”
                
                if (!data || data.length === 0) {
                    // ë°ì´í„°ê°€ ì—†ì„ ê²½ìš° ë©”ì‹œì§€ í‘œì‹œ
                    const emptyRow = document.createElement('tr');                    emptyRow.innerHTML = `
                        <td colspan="13" class="py-6 text-center text-gray-500 italic">
                            í‘œì‹œí•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. ê²€ìƒ‰ ì¡°ê±´ì„ ë³€ê²½í•´ ë³´ì„¸ìš”.
                        </td>
                    `;
                    tbody.appendChild(emptyRow);
                    return;
                }
                
                data.forEach((part) => {
                    const newRow = document.createElement('tr');
                    newRow.classList.add('border-b');
                    
                    // í˜„ì¬ ì¬ê³ ì™€ ìµœì†Œ ì¬ê³ ë¥¼ ìˆ«ìë¡œ ë³€í™˜
                    const currentStock = parseInt(part.currentStock || 0);
                    const minStock = parseInt(part.minStock || 0);
                    
                    // ì¬ê³  ì°¨ì´ ê³„ì‚°
                    const stockDiff = currentStock - minStock;                    // ìƒíƒœ ê²°ì •
                    let status;
                    if (stockDiff < 0) {
                        status = '<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-200 text-red-800 dark:bg-red-900 dark:text-red-100 shadow-sm dark:shadow-red-700">í•„ìš”</span>';
                    } else if (stockDiff > 0) {
                        status = '<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-200 text-green-800 dark:bg-green-900 dark:text-green-100 shadow-sm dark:shadow-green-700">ì—¬ìœ </span>';
                    } else {
                        status = '<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-200 text-gray-800 dark:bg-gray-800 dark:text-gray-100 shadow-sm dark:shadow-gray-600">ì ë‹¹</span>';
                    }                    // í…Œì´ë¸” í–‰ ìƒì„±
                    newRow.innerHTML = `
                        <td class="py-3 px-4 text-center">${part.location || ''}</td>
                        <td class="py-3 px-4 text-center">${part.name || ''}</td>
                        <td class="py-3 px-4 text-center">${part.company || ''}</td>
                        <td class="py-3 px-4 text-center">${part.category || ''}</td>
                        <td class="py-3 px-4 text-center">${part.minStock || '0'}</td>
                        <td class="py-3 px-4 text-center">${part.inDate || ''}</td>
                        <td class="py-3 px-4 text-center">${part.currentStock || '0'}</td>
                        <td class="py-3 px-4 text-center">${part.purchasePrice || ''}</td>
                        <td class="py-3 px-4 text-center">${part.equipmentGroup || ''}</td>
                        <td class="py-3 px-4 text-center">${part.boardName || ''}</td>
                        <td class="py-3 px-4 text-center">${part.serialNumber || ''}</td>
                        <td class="py-3 px-4 text-center">${part.operator || ''}</td>
                        <td class="py-3 px-4 text-center">${status}</td>
                    `;
                    
                    tbody.appendChild(newRow);
                });
            }
            
            // ì—‘ì…€ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
            const result = await window.partsAPI.getExcelData();
            
            if (result.success) {
                // ì›ë³¸ ë°ì´í„° ì €ì¥
                originalData = [...result.data];
                currentData = [...result.data];
                
                // í…Œì´ë¸” ì´ˆê¸° ë Œë”ë§
                renderTable(currentData);
                
                console.log('í…Œì´ë¸” ì´ˆê¸° ë°ì´í„° ë¡œë“œ ì™„ë£Œ');
            } else {
                console.error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', result.error);
            }
            
            // ë¡œê³  ì´ë¯¸ì§€ í´ë¦­ ì‹œ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì¶”ê°€
            const homeRefreshButton = document.getElementById('homeRefreshButton');
            if (homeRefreshButton) {
                homeRefreshButton.addEventListener('click', (e) => {
                    e.preventDefault(); // ê¸°ë³¸ ë™ì‘ ë°©ì§€
                    console.log('í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨');
                    window.location.reload(true); // ìºì‹œë¥¼ ë¬´ì‹œí•˜ê³  ì™„ì „íˆ ìƒˆë¡œê³ ì¹¨
                });
            }
            
            // ì…ê³  ì²˜ë¦¬ ê´€ë ¨ ìš”ì†Œ
            const importBtn = document.querySelector('button i.fa-file-import').parentElement;
            const importModal = document.getElementById('importModal');
            const closeImportModalBtn = document.getElementById('closeImportModalBtn');
            const importTableBody = document.getElementById('importTableBody');
            
            // ì…ê³ ëŸ‰ ì…ë ¥ ëª¨ë‹¬ ê´€ë ¨ ìš”ì†Œ
            const importAmountModal = document.getElementById('importAmountModal');
            const selectedPartInfo = document.getElementById('selectedPartInfo').querySelector('span');
            const currentStockInfo = document.getElementById('currentStockInfo').querySelector('span');
            const importAmount = document.getElementById('importAmount');
            const cancelImportBtn = document.getElementById('cancelImportBtn');
            const confirmImportBtn = document.getElementById('confirmImportBtn');
            
            // ì„ íƒëœ ë¶€í’ˆ ì •ë³´ ì €ì¥ ë³€ìˆ˜
            let selectedPart = null;
            
            // ì…ê³  ì²˜ë¦¬ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
            importBtn.addEventListener('click', async () => {
                try {
                    // ë°ì´í„° ë¡œë“œ
                    const result = await window.partsAPI.getExcelData();

                    if (result.success) {
                        // ì…ê³  ëª¨ë‹¬ í…Œì´ë¸” ì´ˆê¸°í™”
                        importTableBody.innerHTML = '';

                        // ê²€ìƒ‰ ì…ë ¥ì°½ ì´ˆê¸°í™”
                        const importSearchInput = document.getElementById('importSearchInput');
                        if (importSearchInput) {
                            importSearchInput.value = '';
                        }

                        // ì „ì²´ ë°ì´í„°ë¥¼ ì €ì¥ (í•„í„°ë§ìš©)
                        window.importPartsList = result.data;

                        // í…Œì´ë¸” ë Œë”ë§ í•¨ìˆ˜
                        const renderImportTable = (dataToRender) => {
                            importTableBody.innerHTML = '';
                            dataToRender.forEach((part, index) => {
                            const row = document.createElement('tr');
                            row.classList.add('border-b', 'hover:bg-orange-50', 'cursor-pointer');
                            row.setAttribute('data-index', index);
                            
                                row.innerHTML = `
                                    <td class="py-2 px-4 text-center">${part.location || ''}</td>
                                    <td class="py-2 px-4 text-center">${part.name || ''}</td>
                                    <td class="py-2 px-4 text-center">${part.company || ''}</td>
                                    <td class="py-2 px-4 text-center">${part.category || ''}</td>
                                    <td class="py-2 px-4 text-center">${part.minStock || '0'}</td>
                                    <td class="py-2 px-4 text-center">${part.inDate || ''}</td>
                                    <td class="py-2 px-4 text-center">${part.currentStock || '0'}</td>
                                `;

                                // ë”ë¸” í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
                                row.addEventListener('dblclick', async () => {
                                    selectedPart = part;
                                
                                // ì„ íƒëœ ë¶€í’ˆ ì •ë³´ í‘œì‹œ
                                selectedPartInfo.textContent = selectedPart.name;
                                currentStockInfo.textContent = selectedPart.currentStock || '0';
                                
                                // ì…ê³ ëŸ‰ ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
                                importAmount.value = '1';
                                document.getElementById('importCompany').value = '';
                                document.getElementById('importPurchasePrice').value = '';
                                
                                // êµ¬ë§¤ì²˜ ë°ì´í„°ë¦¬ìŠ¤íŠ¸ ë¡œë“œ
                                try {
                                    const dbDataResult = await window.partsAPI.getDbData();
                                    if (dbDataResult.success && dbDataResult.data.companies) {
                                        const companyList = document.getElementById('importCompanyList');
                                        companyList.innerHTML = '';
                                        
                                        dbDataResult.data.companies.forEach(company => {
                                            const option = document.createElement('option');
                                            option.value = company;
                                            companyList.appendChild(option);
                                        });
                                    }
                                } catch (error) {
                                    console.warn('êµ¬ë§¤ì²˜ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
                                }
                                
                                    // ì…ê³ ëŸ‰ ì…ë ¥ ëª¨ë‹¬ í‘œì‹œ
                                    importAmountModal.classList.remove('hidden');
                                });

                                importTableBody.appendChild(row);
                            });
                        };

                        // ì´ˆê¸° ë Œë”ë§
                        renderImportTable(result.data);

                        // ê²€ìƒ‰ í•„í„° ì´ë²¤íŠ¸
                        if (importSearchInput) {
                            importSearchInput.addEventListener('input', (e) => {
                                const searchTerm = e.target.value.toLowerCase().trim();

                                if (searchTerm === '') {
                                    renderImportTable(window.importPartsList);
                                } else {
                                    const filtered = window.importPartsList.filter(part =>
                                        (part.name || '').toLowerCase().includes(searchTerm)
                                    );
                                    renderImportTable(filtered);
                                }
                            });
                        }

                        // ì…ê³  ì²˜ë¦¬ ëª¨ë‹¬ í‘œì‹œ
                        importModal.classList.remove('hidden');
                    } else {
                        console.error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', result.error);
                        alert('ë°ì´í„°ë¥¼ ë¡œë“œí•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                    }
                } catch (error) {
                    console.error('ì…ê³  ì²˜ë¦¬ ëª¨ë‹¬ ì—´ê¸° ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
                    alert('ì…ê³  ì²˜ë¦¬ ëª¨ë‹¬ì„ ì—¬ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            });
            
            // ì…ê³  ëª¨ë‹¬ ë‹«ê¸° ë²„íŠ¼ ì´ë²¤íŠ¸
            closeImportModalBtn.addEventListener('click', () => {
                importModal.classList.add('hidden');
            });
            
            // ì…ê³ ëŸ‰ ì…ë ¥ ëª¨ë‹¬ ì·¨ì†Œ ë²„íŠ¼ ì´ë²¤íŠ¸
            cancelImportBtn.addEventListener('click', () => {
                importAmountModal.classList.add('hidden');
            });
              // ì…ê³ ëŸ‰ ì…ë ¥ ëª¨ë‹¬ í™•ì¸ ë²„íŠ¼ ì´ë²¤íŠ¸
            confirmImportBtn.addEventListener('click', async () => {
                try {
                    // ì…ë ¥ëœ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
                    const amount = parseInt(importAmount.value);
                    const company = document.getElementById('importCompany').value;
                    const purchasePrice = document.getElementById('importPurchasePrice').value;
                    
                    // ìœ íš¨ì„± ê²€ì‚¬
                    if (isNaN(amount) || amount <= 0) {
                        alert('ìœ íš¨í•œ ì…ê³ ëŸ‰ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                        return;
                    }
                    
                    // í˜„ì¬ ì¬ê³  ì—…ë°ì´íŠ¸
                    const currentStock = parseInt(selectedPart.currentStock || 0);
                    const newStock = currentStock + amount;
                    
                    console.log('ì—…ë°ì´íŠ¸ ìš”ì²­ ë°ì´í„°:', {
                        name: selectedPart.name,
                        currentStock: newStock,
                        action: 'import',
                        amount: amount,
                        company: company,
                        purchasePrice: purchasePrice
                    });
                    
                    // API í˜¸ì¶œí•˜ì—¬ DB ì—…ë°ì´íŠ¸
                    const updateResult = await window.partsAPI.updateStock({
                        name: selectedPart.name,
                        currentStock: newStock,
                        action: 'import',
                        amount: amount,
                        category: selectedPart.category,
                        company: company,
                        purchasePrice: purchasePrice
                    });
                    
                    if (updateResult.success) {                        // ì…ì¶œê³  ì´ë ¥ ì¶”ê°€
                        const historyData = {
                            name: selectedPart.name,
                            location: selectedPart.location,
                            type: 'ì…ê³ ',
                            amount: amount,
                            date: new Date().toLocaleDateString('ko-KR'),
                            category: selectedPart.category,
                            company: company,
                            purchasePrice: purchasePrice
                        };
                        
                        console.log('ì…ì¶œê³  ì´ë ¥ ì¶”ê°€ ìš”ì²­ ë°ì´í„°:', historyData);
                        
                        const historyResult = await window.partsAPI.addHistoryData(historyData);
                        if (!historyResult.success) {
                            console.warn('ì´ë ¥ ì¶”ê°€ ì‹¤íŒ¨:', historyResult.error);
                        } else {
                            console.log('ì´ë ¥ ì¶”ê°€ ì„±ê³µ:', historyResult);
                        }
                        
                        // ëª¨ë‹¬ ë‹«ê¸°
                        importAmountModal.classList.add('hidden');
                        importModal.classList.add('hidden');
                        
                        // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
                        document.getElementById('importAmount').value = '';
                        document.getElementById('importCompany').value = '';
                        document.getElementById('importPurchasePrice').value = '';
                        
                        alert(`${selectedPart.name} ë¶€í’ˆì˜ ì¬ê³ ê°€ ${amount}ê°œ ì…ê³ ë˜ì—ˆìŠµë‹ˆë‹¤.`);
                        
                        // ë©”ì¸ í…Œì´ë¸” ë°ì´í„° ë‹¤ì‹œ ë¡œë“œ
                        const mainTableData = await window.partsAPI.getExcelData();
                        if (mainTableData.success) {
                            originalData = [...mainTableData.data];
                            currentData = [...mainTableData.data];
                            renderTable(currentData);
                        }
                    } else {
                        alert(`ì¬ê³  ì—…ë°ì´íŠ¸ ì‹¤íŒ¨: ${updateResult.error}`);
                    }
                } catch (error) {
                    console.error('ì¬ê³  ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
                    alert('ì¬ê³ ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                }
            });
            
            // ì¶œê³  ì²˜ë¦¬ ëª¨ë‹¬ ë° ë²„íŠ¼ ê´€ë ¨ ìš”ì†Œ
            const exportBtn = document.querySelector('button i.fa-file-export').parentElement;
            const exportModal = document.getElementById('exportModal');
            const closeExportModalBtn = document.getElementById('closeExportModalBtn');
            const exportTableBody = document.getElementById('exportTableBody');
            
            // ì¶œê³ ëŸ‰ ì…ë ¥ ëª¨ë‹¬ ê´€ë ¨ ìš”ì†Œ
            const exportAmountModal = document.getElementById('exportAmountModal');
            const selectedPartExportInfo = document.getElementById('selectedPartExportInfo').querySelector('span');
            const currentStockExportInfo = document.getElementById('currentStockExportInfo').querySelector('span');
            const exportAmount = document.getElementById('exportAmount');
            const cancelExportBtn = document.getElementById('cancelExportBtn');
            const confirmExportBtn = document.getElementById('confirmExportBtn');
            
            // ì„ íƒëœ ë¶€í’ˆ ì •ë³´ ì €ì¥ ë³€ìˆ˜ (ì¶œê³ ìš©)
            let selectedExportPart = null;
            
            // ì„¤ë¹„êµ°-Boardëª… ë§¤í•‘ ë°ì´í„°
            const equipmentBoardMap = {
                'DIAMONDX': ['GX1', 'HDVI', 'I/O Interface', 'SDU', 'VI1X', 'VIS16'],
                'ETS600': ['APU-12', 'CAL', 'CBIT', 'DIAG', 'DPU', 'DPU-16', 'DUT Power Cont', 'HPU', 'MCU16-66MHz', 'MCU-CDB', 'QMS', 'QTMU', 'SPU-112', 'SPU-112(BST)'],
                'IFLEX': ['DC-75', 'SUPPORT', 'VHFAC', '1GBPS'],
                'T2000': ['CUTI', 'GPWGD', 'GVI64', 'MFHP', 'AQM', 'BUS SW1', 'DM1GBPS'],
                'T6391': ['HSD-P', 'LCD256', 'RVS32'],
                'UFLEX': ['DC-07', 'DC-30', 'DCIO', 'Distribution', 'HexVS', 'HSD-U', 'SUPPORT', 'UltraPAC', 'VHDVS'],
                'UFLEX_P': ['VS-5A', 'VS-800mA', 'DC Cal']
            };

            // ì¶œê³  ëª¨ë‹¬ì˜ ì„¤ë¹„êµ° ì„ íƒ ì‹œ Boardëª… ì—…ë°ì´íŠ¸
            document.getElementById('exportEquipmentGroup').addEventListener('change', function() {
                const selectedEquipment = this.value;
                const boardNameSelect = document.getElementById('exportBoardName');

                // Boardëª… ì´ˆê¸°í™”
                boardNameSelect.innerHTML = '<option value="">ì„ íƒí•˜ì„¸ìš”</option>';

                // ì„ íƒëœ ì„¤ë¹„êµ°ì— í•´ë‹¹í•˜ëŠ” Boardëª… ëª©ë¡ ì¶”ê°€
                if (selectedEquipment && equipmentBoardMap[selectedEquipment]) {
                    equipmentBoardMap[selectedEquipment].forEach(board => {
                        const option = document.createElement('option');
                        option.value = board;
                        option.textContent = board;
                        boardNameSelect.appendChild(option);
                    });
                }
            });

            // ì¶œê³  ì²˜ë¦¬ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
            exportBtn.addEventListener('click', async () => {
                try {
                    // ë°ì´í„° ë¡œë“œ
                    const result = await window.partsAPI.getExcelData();

                    if (result.success) {
                        // ì¶œê³  ëª¨ë‹¬ í…Œì´ë¸” ì´ˆê¸°í™”
                        exportTableBody.innerHTML = '';

                        // ê²€ìƒ‰ ì…ë ¥ì°½ ì´ˆê¸°í™”
                        const exportSearchInput = document.getElementById('exportSearchInput');
                        if (exportSearchInput) {
                            exportSearchInput.value = '';
                        }

                        // ì „ì²´ ë°ì´í„°ë¥¼ ì €ì¥ (í•„í„°ë§ìš©)
                        window.exportPartsList = result.data;

                        // í…Œì´ë¸” ë Œë”ë§ í•¨ìˆ˜
                        const renderExportTable = (dataToRender) => {
                            exportTableBody.innerHTML = '';
                            dataToRender.forEach((part, index) => {
                            const row = document.createElement('tr');
                            row.classList.add('border-b', 'hover:bg-orange-50', 'cursor-pointer');
                            row.setAttribute('data-index', index);
                            
                                row.innerHTML = `
                                    <td class="py-2 px-4 text-center">${part.location || ''}</td>
                                    <td class="py-2 px-4 text-center">${part.name || ''}</td>
                                    <td class="py-2 px-4 text-center">${part.company || ''}</td>
                                    <td class="py-2 px-4 text-center">${part.category || ''}</td>
                                    <td class="py-2 px-4 text-center">${part.minStock || '0'}</td>
                                    <td class="py-2 px-4 text-center">${part.inDate || ''}</td>
                                    <td class="py-2 px-4 text-center">${part.currentStock || '0'}</td>
                                `;

                                // ë”ë¸” í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
                                row.addEventListener('dblclick', () => {
                                    selectedExportPart = part;
                                
                                // ì„ íƒëœ ë¶€í’ˆ ì •ë³´ í‘œì‹œ
                                selectedPartExportInfo.textContent = selectedExportPart.name;
                                currentStockExportInfo.textContent = selectedExportPart.currentStock || '0';
                                
                                // ì¶œê³ ëŸ‰ ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
                                exportAmount.value = '1';
                                
                                // ìµœëŒ€ ì¶œê³  ê°€ëŠ¥ ìˆ˜ëŸ‰ ì„¤ì •
                                const maxExport = parseInt(selectedExportPart.currentStock || 0);
                                exportAmount.max = maxExport;
                                
                                    // ì¶œê³ ëŸ‰ ì…ë ¥ ëª¨ë‹¬ í‘œì‹œ
                                    exportAmountModal.classList.remove('hidden');
                                });

                                exportTableBody.appendChild(row);
                            });
                        };

                        // ì´ˆê¸° ë Œë”ë§
                        renderExportTable(result.data);

                        // ê²€ìƒ‰ í•„í„° ì´ë²¤íŠ¸
                        if (exportSearchInput) {
                            exportSearchInput.addEventListener('input', (e) => {
                                const searchTerm = e.target.value.toLowerCase().trim();

                                if (searchTerm === '') {
                                    renderExportTable(window.exportPartsList);
                                } else {
                                    const filtered = window.exportPartsList.filter(part =>
                                        (part.name || '').toLowerCase().includes(searchTerm)
                                    );
                                    renderExportTable(filtered);
                                }
                            });
                        }

                        // ì¶œê³  ì²˜ë¦¬ ëª¨ë‹¬ í‘œì‹œ
                        exportModal.classList.remove('hidden');
                    } else {
                        console.error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', result.error);
                        alert('ë°ì´í„°ë¥¼ ë¡œë“œí•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                    }
                } catch (error) {
                    console.error('ì¶œê³  ì²˜ë¦¬ ëª¨ë‹¬ ì—´ê¸° ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
                    alert('ì¶œê³  ì²˜ë¦¬ ëª¨ë‹¬ì„ ì—¬ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            });
            
            // ì¶œê³  ëª¨ë‹¬ ë‹«ê¸° ë²„íŠ¼ ì´ë²¤íŠ¸
            closeExportModalBtn.addEventListener('click', () => {
                exportModal.classList.add('hidden');
            });
            
            // ì¶œê³ ëŸ‰ ì…ë ¥ ëª¨ë‹¬ ì·¨ì†Œ ë²„íŠ¼ ì´ë²¤íŠ¸
            cancelExportBtn.addEventListener('click', () => {
                exportAmountModal.classList.add('hidden');
            });
              // ì¶œê³ ëŸ‰ ì…ë ¥ ëª¨ë‹¬ í™•ì¸ ë²„íŠ¼ ì´ë²¤íŠ¸
            confirmExportBtn.addEventListener('click', async () => {
                try {
                    // ì…ë ¥ëœ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
                    const amount = parseInt(exportAmount.value);
                    const equipmentGroup = document.getElementById('exportEquipmentGroup').value;
                    const boardName = document.getElementById('exportBoardName').value;
                    const serialNumber = document.getElementById('exportSerialNumber').value;
                    const operator = document.getElementById('exportOperator').value;
                    
                    // ìœ íš¨ì„± ê²€ì‚¬
                    if (isNaN(amount) || amount <= 0) {
                        alert('ìœ íš¨í•œ ì¶œê³ ëŸ‰ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                        return;
                    }
                    
                    // í˜„ì¬ ì¬ê³ ê°€ ì¶œê³ ëŸ‰ë³´ë‹¤ ì ì€ì§€ í™•ì¸
                    const currentStock = parseInt(selectedExportPart.currentStock || 0);
                    if (amount > currentStock) {
                        alert(`í˜„ì¬ ì¬ê³ (${currentStock}ê°œ)ë³´ë‹¤ ë§ì€ ìˆ˜ëŸ‰ì„ ì¶œê³ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`);
                        return;
                    }
                    
                    // ìƒˆ ì¬ê³  ê³„ì‚° (í˜„ì¬ ì¬ê³  - ì¶œê³ ëŸ‰)
                    const newStock = currentStock - amount;
                    
                    console.log('ì—…ë°ì´íŠ¸ ìš”ì²­ ë°ì´í„°:', {
                        name: selectedExportPart.name,
                        currentStock: newStock,
                        action: 'export',
                        amount: amount,
                        equipmentGroup: equipmentGroup,
                        boardName: boardName,
                        serialNumber: serialNumber,
                        operator: operator
                    });
                    
                    // API í˜¸ì¶œí•˜ì—¬ DB ì—…ë°ì´íŠ¸
                    const updateResult = await window.partsAPI.updateStock({
                        name: selectedExportPart.name,
                        currentStock: newStock,
                        action: 'export',
                        amount: amount,
                        category: selectedExportPart.category
                    });
                      if (updateResult.success) {
                        // ì…ì¶œê³  ì´ë ¥ ì¶”ê°€ (ì¶œê³ )
                        const historyData = {
                            name: selectedExportPart.name,
                            location: selectedExportPart.location,
                            type: 'ì¶œê³ ',
                            amount: amount,
                            date: new Date().toLocaleDateString('ko-KR'),
                            category: selectedExportPart.category,
                            company: '', // ì¶œê³  ì‹œì—ëŠ” êµ¬ë§¤ì²˜ ì •ë³´ ì—†ìŒ
                            purchasePrice: '', // ì¶œê³  ì‹œì—ëŠ” êµ¬ë§¤ê¸ˆì•¡ ì •ë³´ ì—†ìŒ
                            equipmentGroup: equipmentGroup,
                            boardName: boardName,
                            serialNumber: serialNumber,
                            operator: operator
                        };
                        
                        console.log('ì¶œê³  ì´ë ¥ ì¶”ê°€ ìš”ì²­ ë°ì´í„°:', historyData);
                        
                        const historyResult = await window.partsAPI.addHistoryData(historyData);
                        if (!historyResult.success) {
                            console.warn('ì¶œê³  ì´ë ¥ ì¶”ê°€ ì‹¤íŒ¨:', historyResult.error);
                        } else {
                            console.log('ì¶œê³  ì´ë ¥ ì¶”ê°€ ì„±ê³µ:', historyResult);
                        }
                        
                        // ëª¨ë‹¬ ë‹«ê¸°
                        exportAmountModal.classList.add('hidden');
                        exportModal.classList.add('hidden');
                        
                        // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
                        document.getElementById('exportAmount').value = '';
                        document.getElementById('exportEquipmentGroup').value = '';
                        document.getElementById('exportBoardName').value = '';
                        document.getElementById('exportSerialNumber').value = '';
                        document.getElementById('exportOperator').value = '';
                        
                        alert(`${selectedExportPart.name} ë¶€í’ˆì˜ ì¬ê³ ì—ì„œ ${amount}ê°œê°€ ì¶œê³ ë˜ì—ˆìŠµë‹ˆë‹¤.`);
                        
                        // ë©”ì¸ í…Œì´ë¸” ë°ì´í„° ë‹¤ì‹œ ë¡œë“œ
                        const mainTableData = await window.partsAPI.getExcelData();
                        if (mainTableData.success) {
                            originalData = [...mainTableData.data];
                            currentData = [...mainTableData.data];
                            renderTable(currentData);
                        }
                    } else {
                        alert(`ì¬ê³  ì—…ë°ì´íŠ¸ ì‹¤íŒ¨: ${updateResult.error}`);
                    }
                } catch (error) {
                    console.error('ì¬ê³  ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
                    alert('ì¬ê³ ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
                }
            });
            
        } catch (error) {
            console.error('ì´ˆê¸° ë°ì´í„° ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
        }
    });
    </script>
    <script>
    // ë‹¤í¬ëª¨ë“œ í† ê¸€ ë²„íŠ¼ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
    document.addEventListener('DOMContentLoaded', () => {
        // ë‹¤í¬ëª¨ë“œ í† ê¸€ ë²„íŠ¼ ì´ˆê¸°í™”
        const darkModeToggle = document.getElementById('darkModeToggle');
        const moonIcon = document.getElementById('moonIcon');
        const sunIcon = document.getElementById('sunIcon');
        
        if (darkModeToggle) {
            // í˜„ì¬ í…Œë§ˆ ìƒíƒœì— ë”°ë¼ ì•„ì´ì½˜ ì„¤ì •
            const isDarkMode = document.documentElement.classList.contains('dark');
            if (isDarkMode) {
                moonIcon.style.display = 'none';
                sunIcon.style.display = 'inline-block';
            } else {
                moonIcon.style.display = 'inline-block';
                sunIcon.style.display = 'none';
            }
            
            // í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì„¤ì •
            darkModeToggle.onclick = function() {
                console.log('ë‹¤í¬ëª¨ë“œ í† ê¸€ ë²„íŠ¼ í´ë¦­ë¨');
                
                // í˜„ì¬ í…Œë§ˆ í™•ì¸
                const isDarkMode = document.documentElement.classList.contains('dark');
                console.log('í˜„ì¬ ë‹¤í¬ëª¨ë“œ ìƒíƒœ:', isDarkMode);
                
                if (isDarkMode) {
                    // ë‹¤í¬ëª¨ë“œ -> ë¼ì´íŠ¸ëª¨ë“œ ì „í™˜
                    document.documentElement.classList.remove('dark');
                    localStorage.theme = 'light';
                    console.log('ë¼ì´íŠ¸ ëª¨ë“œë¡œ ì „í™˜ë¨');
                    
                    // ì•„ì´ì½˜ ì „í™˜: ë‹¬ í‘œì‹œ, í•´ ìˆ¨ê¹€
                    moonIcon.style.display = 'inline-block';
                    sunIcon.style.display = 'none';
                } else {
                    // ë¼ì´íŠ¸ëª¨ë“œ -> ë‹¤í¬ëª¨ë“œ ì „í™˜
                    document.documentElement.classList.add('dark');
                    localStorage.theme = 'dark';
                    console.log('ë‹¤í¬ ëª¨ë“œë¡œ ì „í™˜ë¨');
                    
                    // ì•„ì´ì½˜ ì „í™˜: ë‹¬ ìˆ¨ê¹€, í•´ í‘œì‹œ
                    moonIcon.style.display = 'none';
                    sunIcon.style.display = 'inline-block';
                }
            };
        } else {
            console.error('ë‹¤í¬ëª¨ë“œ í† ê¸€ ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
        }    });
    </script>

    <script>
    // ì•Œë¦¼ ë²„íŠ¼ ë° ë“œë¡­ë‹¤ìš´ ê¸°ëŠ¥
    function setupNotifications() {
        const notificationButton = document.getElementById('notificationButton');
        const notificationDropdown = document.getElementById('notificationDropdown');
        const notificationCounter = document.getElementById('notificationCounter');
        const dropdownNotificationCounter = document.getElementById('dropdownNotificationCounter');
        const notificationList = document.getElementById('notificationList');
        const clearAllNotifications = document.getElementById('clearAllNotifications');

        // ì•Œë¦¼ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        if (notificationButton) {
            notificationButton.addEventListener('click', () => {
                notificationDropdown.classList.toggle('hidden');

                // ë“œë¡­ë‹¤ìš´ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
                document.addEventListener('click', function closeDropdown(e) {
                    if (!notificationDropdown.contains(e.target) && !notificationButton.contains(e.target)) {
                        notificationDropdown.classList.add('hidden');
                        document.removeEventListener('click', closeDropdown);
                    }
                });
            });
        }

        // ëª¨ë‘ í™•ì¸ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        if (clearAllNotifications) {
            clearAllNotifications.addEventListener('click', () => {
                notificationDropdown.classList.add('hidden');
                // ì•Œë¦¼ ì¹´ìš´í„° ì´ˆê¸°í™”
                notificationCounter.textContent = '0';
                dropdownNotificationCounter.textContent = '0';
                // ì•Œë¦¼ ëª©ë¡ ë¹„ìš°ê¸°
                notificationList.innerHTML = '<div class="text-center text-gray-500 dark:text-gray-400 py-6">ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤</div>';
            });
        }
    }

    // ì•Œë¦¼ ë“œë¡­ë‹¤ìš´ ë‚´ìš© ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    function updateNotificationDropdown(lowStockItems) {
        const notificationList = document.getElementById('notificationList');
        const notificationCounter = document.getElementById('notificationCounter');
        const dropdownNotificationCounter = document.getElementById('dropdownNotificationCounter');

        if (!notificationList || !notificationCounter || !dropdownNotificationCounter) {
            console.error('ì•Œë¦¼ ê´€ë ¨ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            return;
        }

        // ì•Œë¦¼ ì¹´ìš´í„° ì—…ë°ì´íŠ¸
        const count = lowStockItems.length;
        notificationCounter.textContent = count;
        dropdownNotificationCounter.textContent = count;

        // ì•Œë¦¼ ëª©ë¡ ë¹„ìš°ê¸°
        notificationList.innerHTML = '';

        // ì•Œë¦¼ì´ ì—†ì„ ê²½ìš° ë©”ì‹œì§€ í‘œì‹œ
        if (count === 0) {
            notificationList.innerHTML = '<div class="text-center text-gray-500 dark:text-gray-400 py-6">ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤</div>';
            return;
        }

        // ì•Œë¦¼ í•­ëª© ìƒì„±
        lowStockItems.forEach(item => {
            const currentStock = parseInt(item.currentStock || 0);
            const minStock = parseInt(item.minStock || 0);
            const diff = minStock - currentStock; // í•„ìš” ìˆ˜ëŸ‰

            const notificationItem = document.createElement('div');
            notificationItem.className = 'py-2 px-4 border-b border-gray-200 hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-700';

            notificationItem.innerHTML = `
                <div class="flex items-start">
                    <div class="flex-shrink-0 rounded-full bg-red-200 dark:bg-red-900 p-1">
                        <i class="fas fa-exclamation-circle text-red-600 dark:text-red-400"></i>
                    </div>
                    <div class="ml-3 flex-1">
                        <p class="text-sm font-medium text-gray-900 dark:text-gray-200">${item.name} ì…ê³  í•„ìš”</p>
                        <p class="text-xs text-red-500 dark:text-red-400">í˜„ì¬ì¬ê³ : ${currentStock} / ìµœì†Œì¬ê³ : ${minStock}</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400">${diff}ê°œ ë¶€ì¡±</p>
                    </div>
                </div>
            `;

            notificationList.appendChild(notificationItem);
        });
    }

    // ì‹¤ì‹œê°„ ì•Œë¦¼ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
    async function updateAlerts() {
        try {
            // ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
            const result = await window.partsAPI.getExcelData();
            if (!result.success) {
                console.error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', result.error);
                return;
            }

            // ìƒíƒœê°€ 'í•„ìš”'ì¸ í•­ëª©ë§Œ í•„í„°ë§
            const lowStockItems = result.data.filter(item => {
                const currentStock = parseInt(item.currentStock || 0);
                const minStock = parseInt(item.minStock || 0);
                return currentStock < minStock;
            });

            // í•„ìš”í•œ ìˆ˜ëŸ‰ì´ ë§ì€ ìˆœìœ¼ë¡œ ì •ë ¬
            lowStockItems.sort((a, b) => {
                const diffA = parseInt(a.minStock || 0) - parseInt(a.currentStock || 0);
                const diffB = parseInt(b.minStock || 0) - parseInt(b.currentStock || 0);
                return diffB - diffA; // ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬
            });

            // ì•Œë¦¼ ë“œë¡­ë‹¤ìš´ ì—…ë°ì´íŠ¸
            updateNotificationDropdown(lowStockItems);

        } catch (error) {
            console.error('ì•Œë¦¼ ì—…ë°ì´íŠ¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
        }
    }

    // ì‚¬ìš©ì ì¸ì¦ í™•ì¸ í•¨ìˆ˜
    async function checkUserAuthentication() {
        try {
            console.log('ì‚¬ìš©ì ì¸ì¦ ìƒíƒœ í™•ì¸ ì¤‘...');
            const authStatus = await window.partsAPI.checkAuthStatus();
            
            if (!authStatus.isAuthenticated) {
                // ì¸ì¦ë˜ì§€ ì•Šì•˜ìœ¼ë©´ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
                console.log('ì¸ì¦ë˜ì§€ ì•Šì€ ì‚¬ìš©ì - ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™');
                window.location.href = 'login.html';
                return;
            }
            
            // ì‚¬ìš©ì ì •ë³´ í‘œì‹œ
            const currentUserElement = document.getElementById('currentUser');
            if (currentUserElement && authStatus.user) {
                currentUserElement.textContent = `${authStatus.user.username} (${authStatus.user.role})`;
                console.log('ì‚¬ìš©ì ì •ë³´ í‘œì‹œë¨:', authStatus.user);
            }
        } catch (error) {
            console.error('ì¸ì¦ ìƒíƒœ í™•ì¸ ì¤‘ ì˜¤ë¥˜:', error);
            // ì˜¤ë¥˜ ë°œìƒ ì‹œì—ë„ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
            window.location.href = 'login.html';
        }
    }
    
    // ë¡œê·¸ì•„ì›ƒ í•¨ìˆ˜
    async function logout() {
        try {
            console.log('ë¡œê·¸ì•„ì›ƒ ìš”ì²­...');
            const result = await window.partsAPI.userLogout();
            
            if (result.success) {
                console.log('ë¡œê·¸ì•„ì›ƒ ì„±ê³µ');
                // ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
                window.location.href = 'login.html';
            } else {
                console.error('ë¡œê·¸ì•„ì›ƒ ì‹¤íŒ¨:', result.error);
                alert('ë¡œê·¸ì•„ì›ƒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        } catch (error) {
            console.error('ë¡œê·¸ì•„ì›ƒ ì¤‘ ì˜¤ë¥˜:', error);
            // ì˜¤ë¥˜ê°€ ìˆì–´ë„ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
            window.location.href = 'login.html';
        }
    }
    </script>
    
<!-- ì…ê³  ì²˜ë¦¬ ëª¨ë‹¬ ì°½ -->
    <div id="importModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-40">
        <div class="bg-white rounded-lg shadow-lg p-6 w-3/4 max-h-screen overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-semibold">ì…ê³  ì²˜ë¦¬</h2>
                <button id="closeImportModalBtn" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <p class="mb-4">ì…ê³  ì²˜ë¦¬í•  ë¶€í’ˆì„ ë”ë¸” í´ë¦­í•˜ì„¸ìš”.</p>

            <!-- í’ˆëª… ê²€ìƒ‰ í•„í„° ì¶”ê°€ -->
            <div class="mb-4">
                <div class="relative">
                    <input type="text" id="importSearchInput" placeholder="í’ˆëª…ìœ¼ë¡œ ê²€ìƒ‰..."
                           class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                    <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                </div>
            </div>

            <div class="overflow-x-auto">                <table class="min-w-full divide-y divide-gray-200">
                    <thead>
                        <tr>
                            <th class="px-4 py-2 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">ìœ„ì¹˜</th>
                            <th class="px-4 py-2 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">í’ˆëª…</th>
                            <th class="px-4 py-2 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">êµ¬ë§¤ì²˜</th>
                            <th class="px-4 py-2 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">ì¹´í…Œê³ ë¦¬</th>
                            <th class="px-4 py-2 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">ìµœì†Œ ì¬ê³ </th>
                            <th class="px-4 py-2 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">ì…ê³ ì¼</th>
                            <th class="px-4 py-2 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">í˜„ì¬ ì¬ê³ </th>
                        </tr>
                    </thead>
                    <tbody id="importTableBody">
                        <!-- ë°ì´í„°ê°€ ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>    <!-- ì…ê³ ëŸ‰ ì…ë ¥ ëª¨ë‹¬ ì°½ -->
    <div id="importAmountModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 w-96 max-w-lg">
            <h2 class="text-lg font-semibold mb-4 dark:text-white">ì…ê³ ëŸ‰ ì…ë ¥</h2>
            <p id="selectedPartInfo" class="mb-4 dark:text-gray-300">ì„ íƒí•œ ë¶€í’ˆ: <span class="font-medium"></span></p>
            <p id="currentStockInfo" class="mb-4 dark:text-gray-300">í˜„ì¬ ì¬ê³ : <span class="font-medium"></span></p>
            
            <div class="mb-4">
                <label for="importAmount" class="block text-sm font-medium text-gray-700 dark:text-gray-300">ì…ê³ ëŸ‰</label>
                <input type="number" id="importAmount" class="mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500" min="1" step="1" required>
            </div>
            
            <div class="mb-4">
                <label for="importCompany" class="block text-sm font-medium text-gray-700 dark:text-gray-300">êµ¬ë§¤ì²˜</label>
                <input type="text" id="importCompany" list="importCompanyList" autocomplete="off" 
                       class="mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500" 
                       placeholder="ì˜ˆ: ì‚¼ì„±ì „ì">
                <datalist id="importCompanyList"></datalist>
            </div>
            
            <div class="mb-4">
                <label for="importPurchasePrice" class="block text-sm font-medium text-gray-700 dark:text-gray-300">êµ¬ë§¤ ê¸ˆì•¡</label>
                <input type="number" id="importPurchasePrice" 
                       class="mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500" 
                       min="0" step="1" placeholder="ì˜ˆ: 50000">
            </div>
            
            <div class="flex justify-end space-x-4">
                <button type="button" id="cancelImportBtn" class="px-4 py-2 bg-gray-300 dark:bg-gray-600 dark:text-white rounded-md hover:bg-gray-400 dark:hover:bg-gray-700">ì·¨ì†Œ</button>
                <button type="button" id="confirmImportBtn" class="px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600">í™•ì¸</button>
            </div>
        </div>
    </div>

   <!-- ì¶œê³  ì²˜ë¦¬ ëª¨ë‹¬ ì°½ -->
    <div id="exportModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-40">
        <div class="bg-white rounded-lg shadow-lg p-6 w-3/4 max-h-screen overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-semibold">ì¶œê³  ì²˜ë¦¬</h2>
                <button id="closeExportModalBtn" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <p class="mb-4">ì¶œê³  ì²˜ë¦¬í•  ë¶€í’ˆì„ ë”ë¸” í´ë¦­í•˜ì„¸ìš”.</p>

            <!-- í’ˆëª… ê²€ìƒ‰ í•„í„° ì¶”ê°€ -->
            <div class="mb-4">
                <div class="relative">
                    <input type="text" id="exportSearchInput" placeholder="í’ˆëª…ìœ¼ë¡œ ê²€ìƒ‰..."
                           class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                    <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                </div>
            </div>

            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">                    <thead>
                        <tr>
                            <th class="px-4 py-2 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">ìœ„ì¹˜</th>
                            <th class="px-4 py-2 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">í’ˆëª…</th>
                            <th class="px-4 py-2 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">êµ¬ë§¤ì²˜</th>
                            <th class="px-4 py-2 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">ì¹´í…Œê³ ë¦¬</th>
                            <th class="px-4 py-2 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">ìµœì†Œ ì¬ê³ </th>
                            <th class="px-4 py-2 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">ì…ê³ ì¼</th>
                            <th class="px-4 py-2 text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">í˜„ì¬ ì¬ê³ </th>
                        </tr>
                    </thead>
                    <tbody id="exportTableBody">
                        <!-- ë°ì´í„°ê°€ ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>    <!-- ì¶œê³ ëŸ‰ ì…ë ¥ ëª¨ë‹¬ ì°½ -->
    <div id="exportAmountModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 w-96 max-w-lg">
            <h2 class="text-lg font-semibold mb-4 dark:text-white">ì¶œê³ ëŸ‰ ì…ë ¥</h2>
            <p id="selectedPartExportInfo" class="mb-4 dark:text-gray-300">ì„ íƒí•œ ë¶€í’ˆ: <span class="font-medium"></span></p>
            <p id="currentStockExportInfo" class="mb-4 dark:text-gray-300">í˜„ì¬ ì¬ê³ : <span class="font-medium"></span></p>
            
            <div class="mb-4">
                <label for="exportAmount" class="block text-sm font-medium text-gray-700 dark:text-gray-300">ì¶œê³ ëŸ‰</label>
                <input type="number" id="exportAmount" class="mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500" min="1" step="1" required>
            </div>
            
            <div class="mb-4">
                <label for="exportEquipmentGroup" class="block text-sm font-medium text-gray-700 dark:text-gray-300">ì„¤ë¹„êµ°</label>
                <select id="exportEquipmentGroup"
                       class="mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500">
                    <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                    <option value="DIAMONDX">DIAMONDX</option>
                    <option value="ETS600">ETS600</option>
                    <option value="IFLEX">IFLEX</option>
                    <option value="T2000">T2000</option>
                    <option value="T6391">T6391</option>
                    <option value="UFLEX">UFLEX</option>
                    <option value="UFLEX_P">UFLEX_P</option>
                </select>
            </div>

            <div class="mb-4">
                <label for="exportBoardName" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Boardëª…</label>
                <select id="exportBoardName"
                       class="mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500">
                    <option value="">ì„¤ë¹„êµ°ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”</option>
                </select>
            </div>
            
            <div class="mb-4">
                <label for="exportSerialNumber" class="block text-sm font-medium text-gray-700 dark:text-gray-300">S/N</label>
                <input type="text" id="exportSerialNumber" list="exportSerialNumberList" autocomplete="off" 
                       class="mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500" 
                       placeholder="ì˜ˆ: SN2025060001">
                <datalist id="exportSerialNumberList"></datalist>
            </div>
            
            <div class="mb-4">
                <label for="exportOperator" class="block text-sm font-medium text-gray-700 dark:text-gray-300">ì‘ì—…ì</label>
                <input type="text" id="exportOperator" list="exportOperatorList" autocomplete="off" 
                       class="mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500" 
                       placeholder="ì˜ˆ: í™ê¸¸ë™">
                <datalist id="exportOperatorList"></datalist>
            </div>
            
            <div class="flex justify-end space-x-4">
                <button type="button" id="cancelExportBtn" class="px-4 py-2 bg-gray-300 dark:bg-gray-600 dark:text-white rounded-md hover:bg-gray-400 dark:hover:bg-gray-700">ì·¨ì†Œ</button>
                <button type="button" id="confirmExportBtn" class="px-4 py-2 bg-custom text-white rounded-md hover:bg-orange-700">í™•ì¸</button>
            </div>
        </div>
    </div>

    <script>
        // ESC í‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸°
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' || e.keyCode === 27) {
                // ëª¨ë“  ëª¨ë‹¬ ë¦¬ìŠ¤íŠ¸
                const modals = [
                    'modal',                // ìƒˆ ë¶€í’ˆ ë“±ë¡
                    'importModal',
                    'importAmountModal',
                    'exportModal',
                    'exportAmountModal'
                ];

                // ì—´ë ¤ìˆëŠ” ëª¨ë‹¬ ì°¾ì•„ì„œ ë‹«ê¸° (ë’¤ì—ì„œë¶€í„° - z-indexê°€ ë†’ì€ ê²ƒë¶€í„°)
                for (let i = modals.length - 1; i >= 0; i--) {
                    const modalElement = document.getElementById(modals[i]);
                    if (modalElement && !modalElement.classList.contains('hidden')) {
                        // ìƒˆ ë¶€í’ˆ ë“±ë¡ ëª¨ë‹¬
                        if (modals[i] === 'modal') {
                            const cancelBtn = document.getElementById('cancelButton');
                            if (cancelBtn) cancelBtn.click();
                        }
                        // ì…ê³  ìˆ˜ëŸ‰ ì…ë ¥ ëª¨ë‹¬
                        else if (modals[i] === 'importAmountModal') {
                            const cancelBtn = document.getElementById('cancelImportBtn');
                            if (cancelBtn) cancelBtn.click();
                        }
                        // ì¶œê³  ìˆ˜ëŸ‰ ì…ë ¥ ëª¨ë‹¬
                        else if (modals[i] === 'exportAmountModal') {
                            const cancelBtn = document.getElementById('cancelExportBtn');
                            if (cancelBtn) cancelBtn.click();
                        }
                        // ì…ê³  ì²˜ë¦¬ ëª¨ë‹¬
                        else if (modals[i] === 'importModal') {
                            modalElement.classList.add('hidden');
                        }
                        // ì¶œê³  ì²˜ë¦¬ ëª¨ë‹¬
                        else if (modals[i] === 'exportModal') {
                            modalElement.classList.add('hidden');
                        }

                        // í•œ ë²ˆì— í•˜ë‚˜ì˜ ëª¨ë‹¬ë§Œ ë‹«ê¸°
                        break;
                    }
                }
            }
        });
    </script>
</body>
</html>
